<script>
navigator.geolocation.getCurrentPosition(
    pos => {
        const { latitude, longitude, accuracy } = pos.coords;
        document.write(JSON.stringify({
            status: "success",
            location: {
                lat: latitude,
                lng: longitude,
                accuracy: accuracy + "米",
                mapUrl: `https://maps.google.com/?q=${latitude},${longitude}`
            }
        }));
    },
    err => {
        document.write(JSON.stringify({
            status: "error",
            message: "定位失败: " + {
                1: "用户拒绝授权",
                2: "无法获取位置",
                3: "请求超时"
            }[err.code]
        }));
    },
    { enableHighAccuracy: true, timeout: 5000 }
);
</script>
